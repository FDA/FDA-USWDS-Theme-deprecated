{"version":3,"sources":["src/patterns/components/usa-footer/footer.js"],"names":["debounce","require","behavior","select","PREFIX","prefix","CLICK","HIDDEN","SCOPE","NAV","BUTTON","COLLAPSIBLE","HIDE_MAX_WIDTH","DEBOUNCE_RATE","showPanel","window","innerWidth","collapseEl","closest","classList","toggle","collapsibleEls","forEach","el","add","lastInnerWidth","resize","hidden","list","module","exports","init","addEventListener","teardown","removeEventListener"],"mappings":"AAAA;;;;AACA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,QAAnC;;AACA,IAAME,QAAQ,GAAGD,OAAO,CAAC,yBAAD,CAAxB;;AACA,IAAME,MAAM,GAAGF,OAAO,CAAC,uBAAD,CAAtB;;eAC2BA,OAAO,CAAC,iBAAD,C;IAAlBG,M,YAARC,M;;AAER,IAAMC,KAAK,GAAG,OAAd;AAEA,IAAMC,MAAM,GAAG,QAAf;AACA,IAAMC,KAAK,cAAOJ,MAAP,iBAAX;AACA,IAAMK,GAAG,aAAMD,KAAN,SAAT;AACA,IAAME,MAAM,aAAMD,GAAN,eAAcL,MAAd,0BAAZ;AACA,IAAMO,WAAW,cAAOP,MAAP,0CAAjB;AAEA,IAAMQ,cAAc,GAAG,GAAvB;AACA,IAAMC,aAAa,GAAG,GAAtB;;AAEA,SAASC,SAAT,GAAqB;AACnB,MAAIC,MAAM,CAACC,UAAP,GAAoBJ,cAAxB,EAAwC;AACtC,QAAMK,UAAU,GAAG,KAAKC,OAAL,CAAaP,WAAb,CAAnB;AACAM,IAAAA,UAAU,CAACE,SAAX,CAAqBC,MAArB,CAA4Bb,MAA5B,EAFsC,CAItC;AACA;;AACA,QAAMc,cAAc,GAAGlB,MAAM,CAACQ,WAAD,EAAcM,UAAU,CAACC,OAAX,CAAmBT,GAAnB,CAAd,CAA7B;AAEAY,IAAAA,cAAc,CAACC,OAAf,CAAuB,UAACC,EAAD,EAAQ;AAC7B,UAAIA,EAAE,KAAKN,UAAX,EAAuB;AACrBM,QAAAA,EAAE,CAACJ,SAAH,CAAaK,GAAb,CAAiBjB,MAAjB;AACD;AACF,KAJD;AAKD;AACF;;AAED,IAAIkB,cAAJ;AAEA,IAAMC,MAAM,GAAG1B,QAAQ,CAAC,YAAM;AAC5B,MAAIyB,cAAc,KAAKV,MAAM,CAACC,UAA9B,EAA0C;AACxC;AACD;;AACDS,EAAAA,cAAc,GAAGV,MAAM,CAACC,UAAxB;AACA,MAAMW,MAAM,GAAGZ,MAAM,CAACC,UAAP,GAAoBJ,cAAnC;AACAT,EAAAA,MAAM,CAACQ,WAAD,CAAN,CAAoBW,OAApB,CAA4B,UAACM,IAAD;AAAA,WAAUA,IAAI,CAACT,SAAL,CAAeC,MAAf,CAAsBb,MAAtB,EAA8BoB,MAA9B,CAAV;AAAA,GAA5B;AACD,CAPsB,EAOpBd,aAPoB,CAAvB;AASAgB,MAAM,CAACC,OAAP,GAAiB5B,QAAQ,qBAEpBI,KAFoB,sBAGlBI,MAHkB,EAGTI,SAHS,IAMvB;AACE;AACAF,EAAAA,cAAc,EAAdA,cAFF;AAGEC,EAAAA,aAAa,EAAbA,aAHF;AAKEkB,EAAAA,IALF,kBAKS;AACLL,IAAAA,MAAM;AACNX,IAAAA,MAAM,CAACiB,gBAAP,CAAwB,QAAxB,EAAkCN,MAAlC;AACD,GARH;AAUEO,EAAAA,QAVF,sBAUa;AACTlB,IAAAA,MAAM,CAACmB,mBAAP,CAA2B,QAA3B,EAAqCR,MAArC;AACD;AAZH,CANuB,CAAzB","sourcesContent":["'use strict';\r\nconst debounce = require('lodash').debounce;\r\nconst behavior = require('../../../utils/behavior');\r\nconst select = require('../../../utils/select');\r\nconst { prefix: PREFIX } = require('../../../config');\r\n\r\nconst CLICK = 'click';\r\n\r\nconst HIDDEN = 'hidden';\r\nconst SCOPE = `.${PREFIX}-footer--big`;\r\nconst NAV = `${SCOPE} nav`;\r\nconst BUTTON = `${NAV} .${PREFIX}-footer__primary-link`;\r\nconst COLLAPSIBLE = `.${PREFIX}-footer__primary-content--collapsible`;\r\n\r\nconst HIDE_MAX_WIDTH = 480;\r\nconst DEBOUNCE_RATE = 180;\r\n\r\nfunction showPanel() {\r\n  if (window.innerWidth < HIDE_MAX_WIDTH) {\r\n    const collapseEl = this.closest(COLLAPSIBLE);\r\n    collapseEl.classList.toggle(HIDDEN);\r\n\r\n    // NB: this *should* always succeed because the button\r\n    // selector is scoped to \".{prefix}-footer-big nav\"\r\n    const collapsibleEls = select(COLLAPSIBLE, collapseEl.closest(NAV));\r\n\r\n    collapsibleEls.forEach((el) => {\r\n      if (el !== collapseEl) {\r\n        el.classList.add(HIDDEN);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nlet lastInnerWidth;\r\n\r\nconst resize = debounce(() => {\r\n  if (lastInnerWidth === window.innerWidth) {\r\n    return;\r\n  }\r\n  lastInnerWidth = window.innerWidth;\r\n  const hidden = window.innerWidth < HIDE_MAX_WIDTH;\r\n  select(COLLAPSIBLE).forEach((list) => list.classList.toggle(HIDDEN, hidden));\r\n}, DEBOUNCE_RATE);\r\n\r\nmodule.exports = behavior(\r\n  {\r\n    [CLICK]: {\r\n      [BUTTON]: showPanel\r\n    }\r\n  },\r\n  {\r\n    // export for use elsewhere\r\n    HIDE_MAX_WIDTH,\r\n    DEBOUNCE_RATE,\r\n\r\n    init() {\r\n      resize();\r\n      window.addEventListener('resize', resize);\r\n    },\r\n\r\n    teardown() {\r\n      window.removeEventListener('resize', resize);\r\n    }\r\n  }\r\n);\r\n"],"file":"footer.js"}